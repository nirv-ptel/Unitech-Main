<nb-card>
  <nb-card-body>
    <nb-tabset fullWidth>
      <nb-tab tabTitle="Department Report">
        <div class="row">
          <div class="col-md-6">
            <form [formGroup]="IndentForm">
              <div class="form-group">
                <label for="Select_Item" class="label">Select Item</label>
                <nb-select placeholder="Select Product Item" fullWidth formControlName="departmentName"
                  (ngModelChange)="chengeDepartmentName($event)">
                  <nb-option *ngFor="let item of deptName" value="{{ item }}">{{ item }}
                  </nb-option>
                </nb-select>

              </div>
            </form>
          </div>
          <div class="col-md-6">
            <!-- <button nbButton status="danger">
              Submit
            </button> -->
          </div>
        </div>

        <!-- <table class="table">
          <thead>
            <tr>
              <th scope="col" (click)="sort('itemName')">Item Name &nbsp; <i class="fa fa-sort"></i></th>
              <th scope="col" (click)="sort('description')">Item Description &nbsp; <i class="fa fa-sort"></i></th>
              <th scope="col" (click)="sort('quantity')">quantity &nbsp; <i class="fa fa-sort"></i></th>
              <th scope="col" (click)="sort('requiredDays')">requiredDays &nbsp; <i class="fa fa-sort"></i></th>
              <th scope="col" (click)="sort('issueDate')">issueDate &nbsp; <i class="fa fa-sort"></i></th>
              <th scope="col" (click)="sort('quantity')">Quantity &nbsp; <i class="fa fa-sort"></i></th>
              <th scope="col">Status</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of MachineName | paginate : 
              {
                itemsPerPage: itemsPerPage,
                currentPage: page,
                totalItems: totalItems
              } | orderBy: key: reverse">
              <td>{{item.storeItemModel.itemName}}</td>
              <td>{{item.description}}</td>
              <td>{{item.quantity}}</td>
              <td>{{item.requiredDays}}</td>
              <td ng-controller="datCtrl">{{item.issueDate| date : "MMM dd, y - hh:mm:ss a"}}</td>
              <td *ngIf="admin || store || gm">{{item.quantity}}</td>
              <td *ngIf="item.status == 'PENDING'">
                <span class="badge badge-warning">{{item.status}}</span>
              </td>
              <td *ngIf="item.status == 'DONE'">
                <span class="badge badge-success">{{item.status}}</span>
              </td>
              <td *ngIf="item.status == 'REJECT'">
                <span class="badge badge-danger">{{item.status}}</span>
              </td>
              <td *ngIf="item.status == 'CANCEL'">
                <span class="badge badge-primary">{{item.status}}</span>
              </td>
            
              <td *ngIf="maintanance || store">
                <i class="fa-solid fa-eye" *ngIf="(item.status == 'PENDING' || maintanance)" (click)="onChangeIssueStatus(item, dialog1)" title="View"></i>
              </td>
            </tr>
          </tbody>
        </table>
        <pagination-controls class="pagi" (pageChange)="ViewItemPage((page = $event))"></pagination-controls>
        <div class="float">
          <nb-select class="form-select" [selected]="5" [(ngModel)]="itemsPerPage" (ngModelChange)="refreshCountries()">
            <nb-option [value]="5">5 items per page</nb-option>
            <nb-option [value]="10">10 items per page</nb-option>
            <nb-option [value]="25">25 items per page</nb-option>
          </nb-select>
          </div> -->
        <ng2-smart-table [settings]="settings" [source]="Source">
        </ng2-smart-table>
      </nb-tab>
      <nb-tab tabTitle="Date & Machine Report">
        <form [formGroup]="TwoDate" (ngSubmit)="onDateSubmit()">
          <div class="row">
            <div class="col-md-3">
              <div class="form-group">
                <label for="Select_Item" class="label">Select Department <span class="red">*</span></label>
                <nb-select placeholder="Select Department Name" fullWidth formControlName="deptname"
                  (ngModelChange)="chengeDepartmentName1($event)">
                  <nb-option *ngFor="let item of deptName" value="{{ item }}">{{ item }}
                  </nb-option>
                </nb-select>
              </div>
              <div class="form-group">
                <label for="requiredDays" class="label">Machine</label>
                <nb-select placeholder="Select Machine Name" fullWidth formControlName="machineName">
                  <nb-option [value]="">Select Machine</nb-option>
                  <nb-option *ngFor="let item of MachineName" value="{{ item.id }}">{{ item.name }}
                  </nb-option>
                </nb-select>
              </div>
              <div class="form-group">
                <label for="Date" class="label">Select Start Date <span class="red">*</span></label>
                <input type="date" nbInput fullWidth id="Date" placeholder="Search Start Date" formControlName="start"
                  [max]="getMix()" />
              </div>
              <div class="form-group">
                <label for="end" class="label">Select End Date <span class="red">*</span></label>
                <input type="date" nbInput fullWidth id="end" placeholder="Search End Date" formControlName="end"
                  [max]="getToday()" [min]="getMin()" />
              </div>
              <button nbButton status="danger" [disabled]="TwoDate.invalid">
                Submit
              </button>
            </div>
            <div class="col-md-9">
              <ng2-smart-table [settings]="settings" [source]="SourceFilter">
              </ng2-smart-table>
            </div>
          </div>
        </form>
      </nb-tab>
      <nb-tab tabTitle="Item Report">
        <form [formGroup]="TwoDateItem" (ngSubmit)="onDateItemSubmit()">
          <div class="row">
            <div class="col-md-3">
              <div class="form-group">
                <label for="Select_Item" class="label">Select Item <span class="red">*</span></label>
                <nb-select placeholder="Select Item Name" fullWidth formControlName="itemId">
                  <nb-option *ngFor="let item of item" value="{{ item.itemId }}">{{ item.itemName }}
                  </nb-option>
                </nb-select>
              </div>

              <div class="form-group">
                <label for="Date" class="label">Select Start Date <span class="red">*</span></label>
                <input type="date" nbInput fullWidth id="Date" placeholder="Search Start Date" formControlName="start"
                [max]="getMixItem()" />
              </div>
              <div class="form-group">
                <label for="end" class="label">Select End Date <span class="red">*</span></label>
                <input type="date" nbInput fullWidth id="end" placeholder="Search End Date" formControlName="end"
                [max]="getToday()" [min]="getMinItem()" />
              </div>
              <button nbButton status="danger" [disabled]="TwoDateItem.invalid">
                Submit
              </button>
            </div>
            <div class="col-md-9">
              <ng2-smart-table [settings]="settingsItemDate" [source]="SourceItemFilter">
              </ng2-smart-table>
            </div>
          </div>
        </form>
      </nb-tab>
    </nb-tabset>
  </nb-card-body>
</nb-card>